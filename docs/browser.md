## Browser (Браузер медиафайлов)

**Состояние:** Управляется через `mediaMachine`

- Добавление файлов
- Отображение файлов
- Управление вкладками (Медиатека, Музыка, Переходы, Эффекты, Фильтры, Титры, Шаблоны)
- Навигация по медиатеке
- Просмотр видео и прослушивание аудио
- Сортировка, фильтрация, группировка
- Отображение метаданных файлов
- Добалвение файлов на таймлайн
- Запись с камеры, экрана ПК и голоса

**Компоненты:**

- `browser/` - основной компонент браузера
  - `browser.tsx` - корневой компонент
  - `media-file-list.tsx` - список медиафайлов
  - `music-file-list.tsx` - список аудиофайлов
  - `transitions-list.tsx` - список переходов
  - `effects-list.tsx` - список эффектов
  - `filters-list.tsx` - список фильтров
  - `subtitles-list.tsx` - список титров
  - `media-file-preview.tsx` - предпросмотр файла
  - `media-file-item.tsx` - элемент списка файлов

**Дополнительные компоненты:**

- `media-recording/` - компоненты записи
  - `camera-recording.tsx` - запись с камеры
  - `screen-recording.tsx` - запись экрана
  - `audio-recording.tsx` - запись голоса

**Файлы состояния:**

- `machines/media-machine.ts` - машина состояний
- `providers/media-provider.tsx` - провайдер контекста

**Описание машины состояний:**
`mediaMachine` управляет состоянием медиафайлов в приложении. Она отвечает за загрузку, отображение и управление файлами, включая их добавление в проект, фильтрацию и предпросмотр. Машина также контролирует состояние загрузки и доступность файлов.

**Интерактивное управление воспроизведением:**

1. **Автоматическое воспроизведение при наведении**

   - При наведении курсора на миниатюру показывается временная шкала
   - Видео/аудио автоматически перематывается на позицию курсора
   - Поддерживается множественный предпросмотр для файлов с несколькими потоками

2. **Управление по клику**

   - Клик на миниатюру запускает воспроизведение
   - Повторный клик останавливает воспроизведение
   - При воспроизведении одного файла, другие автоматически останавливаются
   - Воспроизведение начинается с позиции предпросмотра, если она активна

3. **Автоматическая остановка**
   - При уходе курсора с миниатюры воспроизведение автоматически останавливается
   - Временная шкала и индикаторы скрываются
   - Состояние воспроизведения сбрасывается

**Режимы отображения:**

1. **Список (List)**

   - Компактное отображение файлов
   - Показывает миниатюру и метаданные
   - Оптимизирован для быстрого поиска

2. **Сетка (Grid)**

   - Отображение файлов в виде сетки
   - Увеличенные миниатюры
   - Подходит для визуального поиска

3. **Миниатюры (Thumbnails)**
   - Горизонтальное отображение с увеличенными превью
   - Показывает название файла
   - Удобен для работы с видео

**Сортировка, фильтрация и группировка:**

1. **Сортировка**

   - По имени (A-Z, Z-A)
   - По дате создания (новые-старые, старые-новые)
   - По размеру файла
   - По длительности

2. **Фильтрация**

   - Все файлы
   - Видео
   - Аудио
   - Изображения

3. **Группировка**

   - Без группировки
   - По типу файла (видео/аудио/изображения)
   - По дате создания
   - По длительности

4. **Поиск**

   - Поиск по имени файла
   - Поиск по тегам
   - Поиск по метаданным
   - Фильтрация результатов поиска
   - Сохранение поисковых запросов
   - Быстрый поиск (по мере ввода)

5. **Управление метаданными**
   - Просмотр метаданных файла
   - Редактирование тегов
   - Добавление описаний
   - Управление рейтингами
   - Добавление заметок
   - Экспорт метаданных

**Контекст mediaMachine:**

- `allMediaFiles: MediaFile[]` - все доступные медиафайлы
- `includedFiles: MediaFile[]` - файлы, включенные в проект
- `includedFilePaths: string[]` - пути к включенным файлам
- `unavailableFiles: MediaFile[]` - недоступные файлы
- `isLoading: boolean` - состояние загрузки

**Методы mediaMachine:**

- `setLoading` - установка состояния загрузки
- `setAllMediaFiles` - установка всех медиафайлов
- `addMediaFiles` - добавление новых медиафайлов
- `removeMediaFiles` - удаление медиафайлов
- `setIncludedFiles` - установка включенных в проект файлов
- `includeFiles` - включение файлов в проект
- `unincludeFiles` - исключение файлов из проекта
- `setUnavailableFiles` - установка недоступных файлов
