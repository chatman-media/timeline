# Распознавание объектов на видео с использованием YOLOv10

Этот модуль предоставляет функциональность для генерации скриншотов из видео и распознавания объектов на них с использованием YOLOv10.

## Установка

Для работы с модулем необходимо установить Python-зависимости:

```bash
# Установка зависимостей
./scripts/setup-python.sh
```

## Структура модуля

- `generate_screenshots.py` - скрипт для генерации скриншотов из видео
- `detect_objects.py` - скрипт для распознавания объектов на изображениях с использованием YOLOv10
- `requirements.txt` - список Python-зависимостей

## Использование

### Генерация скриншотов из видео

```bash
python3 scripts/python/generate_screenshots.py <путь_к_видео> <директория_для_скриншотов> [--interval <интервал>] [--max-screenshots <максимальное_количество>] [--initial-count <начальное_количество>]
```

Параметры:

- `<путь_к_видео>` - путь к видеофайлу
- `<директория_для_скриншотов>` - директория для сохранения скриншотов
- `--interval` - интервал между скриншотами в секундах (по умолчанию: 1.0)
- `--max-screenshots` - максимальное количество скриншотов (по умолчанию: без ограничений)
- `--initial-count` - количество скриншотов для начальной генерации (по умолчанию: 10)

Пример:

```bash
python3 scripts/python/generate_screenshots.py public/videos/example.mp4 public/screenshots/example --interval 0.5 --initial-count 5
```

### Распознавание объектов на изображениях

```bash
python3 scripts/python/detect_objects.py <пути_к_изображениям> [--output-dir <директория_для_результатов>] [--conf-threshold <порог_уверенности>] [--model <имя_модели>]
```

Параметры:

- `<пути_к_изображениям>` - один или несколько путей к изображениям
- `--output-dir` - директория для сохранения результатов (по умолчанию: без сохранения)
- `--conf-threshold` - порог уверенности для детекций (по умолчанию: 0.25)
- `--model` - имя модели для использования (по умолчанию: yolov10s.pt)

Пример:

```bash
python3 scripts/python/detect_objects.py public/screenshots/example/*.jpg --output-dir public/screenshots/detected/example --conf-threshold 0.3
```

## Интеграция с Node.js

Модуль интегрирован с Node.js через API-эндпоинты:

- `/api/generate-screenshots` - эндпоинт для генерации скриншотов из видео
- `/api/detect-objects` - эндпоинт для распознавания объектов на изображениях

Эти эндпоинты используются в приложении для автоматической генерации скриншотов при добавлении видео на таймлайн и последующего распознавания объектов на них.

## Настройки

Настройки генерации скриншотов и распознавания объектов доступны в пользовательском интерфейсе приложения в разделе настроек пользователя.

## Требования

- Python 3.8 или выше
- OpenCV
- PyTorch
- Ultralytics
